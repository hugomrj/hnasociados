{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">



    <div class="card">

        <div class="card-header">
            <h5 class="mb-0">Cliente</h5>  
        </div>


        <div class="card-body">

            <form method="post" id="form" action="{% url 'cliente:add' %}">

                {% include 'app/cliente/form.html' %}

            </form>
        

            <!-- LÃ­nea divisoria (usando clase MDB) -->
            <hr class="my-4">

            <!-- Botones fuera del formulario -->
            <div class="d-grid gap-2 d-md-flex">    

            
                <button data-mdb-ripple-init 
                    type="button" 
                    id="registro_add"
                    data-url="{% url 'cliente:add' %}" 
                    class="btn btn-primary">Agregar
                </button>
            

                <a href="{% url 'cliente:list' %}"
                    data-mdb-ripple-init 
                    type="button" 
                    class="btn btn-secondary">Cancelar
                </a>

            </div>




        </div>
        

    </div>



</div>
{% endblock %}




{% block extrascripts %}  
    <script src="{% static 'js/common.js' %}"></script>

    <script>

        window.onload = function() {

            document.getElementById("btn_agregar_det").addEventListener("click", function() {

    var form = document.getElementById('form');
    var formData = new FormData(form);
    var url = "{% url 'cliente:clientedetalle' %}";

    fetch(url, {
        method: 'POST',
        body: formData,
        headers: {
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        }
    })
    .then(response => response.json())
    .then(data => {
        console.log(data);
        window.location.href = url;  // Redirigir a la vista
    })
    .catch(error => {
        console.error('Error:', error);
    });



            });



        }




    </script>

{% endblock %}
